<!DOCTYPE html>
<html lang="en">
  <head>
     <title>python.py</title>
<meta name="generator" content="emacs 30.2; htmlfontify" />
<style type="text/css"><!-- 
body, pre { text-decoration: none;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  color: #ffeeee;  background: #1b1616;  font-size: 10pt; }
span.default   { text-decoration: none;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  color: #ffeeee;  background: #1b1616;  font-size: 10pt; }
span.default a {  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  color: #ffeeee;  background: #1b1616;  font-size: 10pt; text-decoration: underline; }
span.type   { text-decoration: none;  color: #998888;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  background: #1b1616;  font-size: 10pt; }
span.type a {  color: #998888;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  background: #1b1616;  font-size: 10pt; text-decoration: underline; }
span.constant   { text-decoration: none;  color: #ff8877;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  background: #1b1616;  font-size: 10pt; }
span.constant a {  color: #ff8877;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  background: #1b1616;  font-size: 10pt; text-decoration: underline; }
span.rainbow-delimiters-depth-2-face   { text-decoration: none;  color: #507073;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  background: #1b1616;  font-size: 10pt; }
span.rainbow-delimiters-depth-2-face a {  color: #507073;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  background: #1b1616;  font-size: 10pt; text-decoration: underline; }
span.number   { text-decoration: none;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  color: #ffeeee;  background: #1b1616;  font-size: 10pt; }
span.number a {  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  color: #ffeeee;  background: #1b1616;  font-size: 10pt; text-decoration: underline; }
span.comment   { text-decoration: none;  color: #715151;  font-weight: 700;  font-family: "default";  font-stretch: normal;  font-style: normal;  background: #1b1616;  font-size: 10pt; }
span.comment a {  color: #715151;  font-weight: 700;  font-family: "default";  font-stretch: normal;  font-style: normal;  background: #1b1616;  font-size: 10pt; text-decoration: underline; }
span.variable-name   { text-decoration: none;  color: #ffaaaa;  font-weight: 700;  font-family: "default";  font-stretch: normal;  font-style: normal;  background: #1b1616;  font-size: 10pt; }
span.variable-name a {  color: #ffaaaa;  font-weight: 700;  font-family: "default";  font-stretch: normal;  font-style: normal;  background: #1b1616;  font-size: 10pt; text-decoration: underline; }
span.rainbow-delimiters-depth-1-face   { text-decoration: none;  color: #5c7e81;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  background: #1b1616;  font-size: 10pt; }
span.rainbow-delimiters-depth-1-face a {  color: #5c7e81;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  background: #1b1616;  font-size: 10pt; text-decoration: underline; }
span.function-name   { text-decoration: none;  color: #eeaaaa;  font-weight: 700;  font-family: "default";  font-stretch: normal;  font-style: normal;  background: #1b1616;  font-size: 10pt; }
span.function-name a {  color: #eeaaaa;  font-weight: 700;  font-family: "default";  font-stretch: normal;  font-style: normal;  background: #1b1616;  font-size: 10pt; text-decoration: underline; }
span.keyword   { text-decoration: none;  color: #eedddd;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  background: #1b1616;  font-size: 10pt; }
span.keyword a {  color: #eedddd;  font-family: "default";  font-stretch: normal;  font-weight: 500;  font-style: normal;  background: #1b1616;  font-size: 10pt; text-decoration: underline; }
 --></style>

  </head>
  <body>

<pre><span class="keyword">def</span> <span class="function-name">config_to_yaml</span><span class="rainbow-delimiters-depth-1-face">(</span><span class="variable-name">config</span><span class="rainbow-delimiters-depth-1-face">)</span>:
    <span class="comment"># OmegaConf to_yaml is subpar use ruamel.yaml + StringIO</span>
    <span class="variable-name">data</span> = OmegaConf.to_container<span class="rainbow-delimiters-depth-1-face">(</span>config<span class="rainbow-delimiters-depth-1-face">)</span>
    <span class="variable-name">yaml</span> = YAML<span class="rainbow-delimiters-depth-1-face">(</span><span class="rainbow-delimiters-depth-1-face">)</span>
    yaml.indent<span class="rainbow-delimiters-depth-1-face">(</span>sequence=<span class="number">4</span>, offset=<span class="number">2</span><span class="rainbow-delimiters-depth-1-face">)</span>
    <span class="variable-name">stream</span> = StringIO<span class="rainbow-delimiters-depth-1-face">(</span><span class="rainbow-delimiters-depth-1-face">)</span>
    yaml.dump<span class="rainbow-delimiters-depth-1-face">(</span>data, stream<span class="rainbow-delimiters-depth-1-face">)</span>  <span class="comment"># smfh</span>
    <span class="keyword">return</span> stream.getvalue<span class="rainbow-delimiters-depth-1-face">(</span><span class="rainbow-delimiters-depth-1-face">)</span>


<span class="keyword">def</span> <span class="function-name">save_config</span><span class="rainbow-delimiters-depth-1-face">(</span><span class="variable-name">config</span><span class="rainbow-delimiters-depth-1-face">)</span>:
    <span class="variable-name">data</span> = OmegaConf.to_container<span class="rainbow-delimiters-depth-1-face">(</span>config<span class="rainbow-delimiters-depth-1-face">)</span>
    <span class="variable-name">yaml</span> = YAML<span class="rainbow-delimiters-depth-1-face">(</span><span class="rainbow-delimiters-depth-1-face">)</span>
    yaml.indent<span class="rainbow-delimiters-depth-1-face">(</span>sequence=<span class="number">4</span>, offset=<span class="number">2</span><span class="rainbow-delimiters-depth-1-face">)</span>
    <span class="keyword">try</span>:
        config_path.write_text<span class="rainbow-delimiters-depth-1-face">(</span>yaml.dump<span class="rainbow-delimiters-depth-2-face">(</span>data, config_path<span class="rainbow-delimiters-depth-2-face">)</span><span class="rainbow-delimiters-depth-1-face">)</span>
        <span class="keyword">return</span> <span class="constant">True</span>
    <span class="keyword">except</span> <span class="type">Exception</span>:
        <span class="keyword">return</span> <span class="constant">False</span>

</pre>

    <script src="../emacs-theme-tools.js"></script>
  </body>
</html>
